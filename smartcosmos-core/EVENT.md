# Event
The SnapBundle platform captures and persists every user's activity stream. Creation, updates, reads and deletes are all logged in their entirety into the databse using an Event model. This activity stream literally is a transaction log of who did what, when. The most common application for this activity stream is to define an [Integration Endpoint](INTEGRATION.md "Integration Endpoints") to receive and process the event stream in near real-time for back office integration.

**Each Account may define as many dedicated Event Stream processing integration endpoints as they deem necessary.**

As user activity occurs in an account, events are generated by the SnapBundle platform and first persisted to the database, and then immediately dispatched to the AWS Simple Notification Service for relay to integration endpoint. **All integration endpoint URLs must begin with https://**.

## Event Fields
Field | Data Type | Required | Can Update | Serialization Level | Default Value
------------ | ------------- | ------------ | ------------ | ------------ | ------------
urn | String  | true | false | Minimum | Generated
lastModifiedTimestamp | long   | true | false | Standard | Generated
account | IAccount  | true | fase | Full | Restricted |
user | IUser | true | false | Minimum | Minimum |
eventType | EventType | true | false | Minimum |
source | String | true | false | Minimum |

The `lastModifiedTimestamp` represents the time the specified User performed the given operation. The operation performed must be contextually deduced from the `eventType` field. Each EventType serializes the resulting object state into the `source` field. In some situations, the `user` and/or `source` fields may be null. For example, a `UserLoginFailure` will never have a `user` object, since the login failed and no corresponding object could be definitively identified. In another example, an ObjectUpdated event would put the authenticated user into the `user` field, and place the resulting Object (as JSON) in the `source` field. By combining the `user`, `eventType`, and `source`, an Extension is able to literally monitor the state of the Account's data in real time.

One last common example worthy of discussion surrounds the definition of a [File](FILE.md "File"). Recall that the definition of a File is a two-stepped procedure. First, the File record is defined, with `pending = true` to indicate that the physical media hasn't yet been uploaded to the cloud. This state is represented with the `FileDefined` event type. If an Extension actually needs to retrieve the media from the SnapBundleâ„¢ platform, it must wait until the `FileUploaded` event triggers, indicating that the file is now ready for download from the cloud. In fact, the `FileUploaded` event's `source` will contain a JSON representation of the updated File that includes the `url` that the Extension can use to fetch the actual content.

> For a complete list of `EventType` values, please review the [EventType](DATA_TYPES.md#et "Data Types") data type definition.

## Event Endpoints

Events are generated automatically when the User interacts with the platform. There are no dedicated endpoints defined in the current release for creating Event objects. A future release will provide a dedicated endpoint for querying events.

> Event objects are by design immutable
